# Generated by Django 4.2.28 on 2026-02-05 06:40

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('halaqat', '0001_initial'),
        ('quran', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Curriculum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم المقرر')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('curriculum_type', models.CharField(choices=[('hifz', 'حفظ'), ('tajweed', 'تجويد'), ('tafseer', 'تفسير'), ('tajweed_tafseer', 'تجويد وتفسير'), ('comprehensive', 'شامل')], default='hifz', max_length=20, verbose_name='نوع المقرر')),
                ('image', models.ImageField(blank=True, null=True, upload_to='curriculum/', verbose_name='صورة المقرر')),
                ('target_juz_from', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(30)], verbose_name='من جزء')),
                ('target_juz_to', models.PositiveIntegerField(default=30, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(30)], verbose_name='إلى جزء')),
                ('duration_weeks', models.PositiveIntegerField(default=12, verbose_name='المدة بالأسابيع')),
                ('lessons_per_week', models.PositiveIntegerField(default=2, verbose_name='الدروس أسبوعياً')),
                ('minutes_per_lesson', models.PositiveIntegerField(default=60, verbose_name='دقيقة للدرس')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('target_surah_from', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='curriculum_starts', to='quran.surah', verbose_name='من سورة')),
                ('target_surah_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='curriculum_ends', to='quran.surah', verbose_name='إلى سورة')),
            ],
            options={
                'verbose_name': 'مقرر دراسي',
                'verbose_name_plural': 'المقررات الدراسية',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CurriculumLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('lesson_number', models.PositiveIntegerField(verbose_name='رقم الدرس')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان الدرس')),
                ('description', models.TextField(blank=True, verbose_name='وصف الدرس')),
                ('lesson_type', models.CharField(choices=[('hifz', 'حفظ'), ('muraja', 'مراجعة'), ('tajweed', 'تجويد'), ('tafseer', 'تفسير'), ('test', 'اختبار'), ('revision', 'مراجعة عامة')], default='hifz', max_length=20, verbose_name='نوع الدرس')),
                ('ayah_from', models.PositiveIntegerField(default=1, verbose_name='من آية')),
                ('ayah_to', models.PositiveIntegerField(default=1, verbose_name='إلى آية')),
                ('tafseer_content', models.TextField(blank=True, verbose_name='محتوى التفسير')),
                ('tafseer_video_url', models.URLField(blank=True, verbose_name='رابط فيديو التفسير')),
                ('duration_minutes', models.PositiveIntegerField(default=60, verbose_name='مدة الدرس')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lessons', to='courses.curriculum', verbose_name='المقرر')),
                ('prerequisite_lessons', models.ManyToManyField(blank=True, related_name='required_for', to='courses.curriculumlesson', verbose_name='الدروس المسبقة')),
                ('surah_from', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lesson_starts', to='quran.surah', verbose_name='من سورة')),
                ('surah_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lesson_ends', to='quran.surah', verbose_name='إلى سورة')),
            ],
            options={
                'verbose_name': 'درس المقرر',
                'verbose_name_plural': 'دروس المقرر',
                'ordering': ['curriculum', 'lesson_number'],
                'unique_together': {('curriculum', 'lesson_number')},
            },
        ),
        migrations.CreateModel(
            name='MotivationalQuote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='العنوان')),
                ('content', models.TextField(verbose_name='المحتوى')),
                ('category', models.CharField(choices=[('general', 'عام'), ('ramadan', 'رمضان'), ('morning', 'صباحية'), ('evening', 'مسائية'), ('friday', 'يوم الجمعة'), ('achievement', 'إنجاز'), ('encouragement', 'تشجيع')], default='general', max_length=20, verbose_name='التصنيف')),
                ('author', models.CharField(blank=True, max_length=100, verbose_name='القائل')),
                ('source', models.CharField(blank=True, max_length=200, verbose_name='المصدر')),
                ('image', models.ImageField(blank=True, null=True, upload_to='quotes/', verbose_name='صورة')),
                ('audio', models.FileField(blank=True, null=True, upload_to='quotes/audio/', verbose_name='ملف صوتي')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='مجدول')),
                ('scheduled_date', models.DateField(blank=True, null=True, verbose_name='تاريخ النشر')),
                ('scheduled_time', models.TimeField(blank=True, null=True, verbose_name='وقت النشر')),
                ('timezone', models.CharField(default='Asia/Riyadh', max_length=50, verbose_name='المنطقة الزمنية')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='متكرر')),
                ('recurring_days', models.JSONField(blank=True, default=list, verbose_name='أيام التكرار')),
                ('is_published', models.BooleanField(default=False, verbose_name='منشور')),
                ('published_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ النشر الفعلي')),
                ('view_count', models.PositiveIntegerField(default=0, verbose_name='عدد المشاهدات')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_quotes', to=settings.AUTH_USER_MODEL, verbose_name='أنشئ بواسطة')),
            ],
            options={
                'verbose_name': 'كلمة تحفيزية',
                'verbose_name_plural': 'الكلمات التحفيزية',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TafseerLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ayah_from', models.PositiveIntegerField(default=1, verbose_name='من آية')),
                ('ayah_to', models.PositiveIntegerField(verbose_name='إلى آية')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان الدرس')),
                ('content', models.TextField(verbose_name='محتوى الدرس')),
                ('summary', models.TextField(blank=True, verbose_name='ملخص الدرس')),
                ('video_url', models.URLField(blank=True, verbose_name='رابط الفيديو')),
                ('audio_url', models.URLField(blank=True, verbose_name='رابط الصوت')),
                ('pdf_file', models.FileField(blank=True, null=True, upload_to='tafseer/pdf/', verbose_name='ملف PDF')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='مجدول')),
                ('scheduled_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الجدولة')),
                ('scheduled_time', models.TimeField(blank=True, null=True, verbose_name='وقت الجدولة')),
                ('timezone', models.CharField(default='Asia/Riyadh', max_length=50, verbose_name='المنطقة الزمنية')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='متكرر')),
                ('recurring_type', models.CharField(choices=[('daily', 'يومي'), ('weekly', 'أسبوعي'), ('monthly', 'شهري'), ('ramadan', 'رمضان')], default='weekly', max_length=20, verbose_name='نوع التكرار')),
                ('is_published', models.BooleanField(default=False, verbose_name='منشور')),
                ('published_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ النشر')),
                ('view_count', models.PositiveIntegerField(default=0, verbose_name='عدد المشاهدات')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_tafseer', to=settings.AUTH_USER_MODEL, verbose_name='أنشئ بواسطة')),
                ('surah', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tafseer_lessons', to='quran.surah', verbose_name='السورة')),
                ('target_curriculums', models.ManyToManyField(blank=True, related_name='tafseer_lessons', to='courses.curriculum', verbose_name='المقررات المستهدفة')),
                ('target_halaqat', models.ManyToManyField(blank=True, related_name='scheduled_tafseer', to='halaqat.halaqa', verbose_name='الحلقات المستهدفة')),
            ],
            options={
                'verbose_name': 'درس تفسير',
                'verbose_name_plural': 'دروس التفسير',
                'ordering': ['surah__number', 'ayah_from'],
            },
        ),
        migrations.CreateModel(
            name='StudentCurriculum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('not_started', 'لم يبدأ'), ('in_progress', 'جاري'), ('completed', 'مكتمل'), ('on_hold', 'متوقف')], default='not_started', max_length=20, verbose_name='الحالة')),
                ('start_date', models.DateField(blank=True, null=True, verbose_name='تاريخ البدء')),
                ('expected_end_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الانتهاء المتوقع')),
                ('actual_end_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الانتهاء الفعلي')),
                ('enable_reminders', models.BooleanField(default=True, verbose_name='تفعيل التنبيهات')),
                ('reminder_time', models.TimeField(default='10:00', verbose_name='وقت التنبيه')),
                ('timezone', models.CharField(default='Asia/Riyadh', max_length=50, verbose_name='المنطقة الزمنية')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ التسجيل')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('current_lesson', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='courses.curriculumlesson', verbose_name='الدرس الحالي')),
                ('curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrolled_students', to='courses.curriculum', verbose_name='المقرر')),
                ('sheikh', models.ForeignKey(blank=True, limit_choices_to={'user_type': 'sheikh'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supervised_curriculums', to=settings.AUTH_USER_MODEL, verbose_name='الشيخ المشرف')),
                ('student', models.ForeignKey(limit_choices_to={'user_type': 'student'}, on_delete=django.db.models.deletion.CASCADE, related_name='enrolled_curriculums', to=settings.AUTH_USER_MODEL, verbose_name='الطالب')),
            ],
            options={
                'verbose_name': 'مقرر طالب',
                'verbose_name_plural': 'مقررات الطلاب',
                'ordering': ['-created_at'],
                'unique_together': {('student', 'curriculum')},
            },
        ),
        migrations.CreateModel(
            name='ScheduledNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='العنوان')),
                ('content', models.TextField(verbose_name='المحتوى')),
                ('notification_type', models.CharField(choices=[('quote', 'كلمة تحفيزية'), ('tafseer', 'درس تفسير'), ('reminder', 'تذكير'), ('lesson', 'درس'), ('custom', 'مخصص')], default='custom', max_length=20, verbose_name='نوع الإشعار')),
                ('scheduled_datetime', models.DateTimeField(verbose_name='تاريخ ووقت الإرسال')),
                ('timezone', models.CharField(default='Asia/Riyadh', max_length=50, verbose_name='المنطقة الزمنية')),
                ('target_all_students', models.BooleanField(default=False, verbose_name='جميع الطلاب')),
                ('status', models.CharField(choices=[('pending', 'معلق'), ('sent', 'تم الإرسال'), ('failed', 'فشل'), ('cancelled', 'ملغي')], default='pending', max_length=20, verbose_name='الحالة')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال الفعلي')),
                ('error_message', models.TextField(blank=True, verbose_name='رسالة الخطأ')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='متكرر')),
                ('recurring_cron', models.CharField(blank=True, help_text='مثال: 0 10 * * * للساعة 10 صباحاً يومياً', max_length=100, verbose_name='تعبير Cron')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_scheduled_notifications', to=settings.AUTH_USER_MODEL, verbose_name='أنشئ بواسطة')),
                ('quote', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='scheduled_notifications', to='courses.motivationalquote', verbose_name='الكلمة التحفيزية')),
                ('tafseer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='scheduled_notifications', to='courses.tafseerlesson', verbose_name='درس التفسير')),
                ('target_halaqat', models.ManyToManyField(blank=True, related_name='scheduled_notifications', to='halaqat.halaqa', verbose_name='الحلقات المستهدفة')),
                ('target_students', models.ManyToManyField(blank=True, limit_choices_to={'user_type': 'student'}, related_name='targeted_notifications', to=settings.AUTH_USER_MODEL, verbose_name='طلاب محددون')),
            ],
            options={
                'verbose_name': 'إشعار مجدول',
                'verbose_name_plural': 'الإشعارات المجدولة',
                'ordering': ['scheduled_datetime'],
            },
        ),
        migrations.CreateModel(
            name='QuoteNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_read', models.BooleanField(default=False, verbose_name='مقروء')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ القراءة')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإرسال')),
                ('quote', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='courses.motivationalquote', verbose_name='الكلمة التحفيزية')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quote_notifications', to=settings.AUTH_USER_MODEL, verbose_name='الطالب')),
            ],
            options={
                'verbose_name': 'إشعار تحفيزي',
                'verbose_name_plural': 'إشعارات تحفيزية',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LessonReminder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scheduled_date', models.DateField(verbose_name='تاريخ الدرس')),
                ('scheduled_time', models.TimeField(verbose_name='وقت الدرس')),
                ('remind_before_minutes', models.PositiveIntegerField(default=60, verbose_name='تذكير قبل (دقيقة)')),
                ('reminder_sent', models.BooleanField(default=False, verbose_name='تم إرسال التذكير')),
                ('reminder_sent_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ إرسال التذكير')),
                ('is_completed', models.BooleanField(default=False, verbose_name='مكتمل')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإكمال')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('lesson', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reminders', to='courses.curriculumlesson', verbose_name='الدرس')),
                ('student_curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reminders', to='courses.studentcurriculum', verbose_name='مقرر الطالب')),
            ],
            options={
                'verbose_name': 'تذكير درس',
                'verbose_name_plural': 'تذكيرات الدروس',
                'ordering': ['scheduled_date', 'scheduled_time'],
            },
        ),
    ]
